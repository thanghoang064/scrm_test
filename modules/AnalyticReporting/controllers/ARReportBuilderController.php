<?php

/*** DOMAIN_CHECK ***/
 include_once "modules/AnalyticReporting/controllers/ARController.php";class ARReportBuilderController extends ARController{function reportBuilder(){global $mod_strings, $app_strings;$db = PlatformConnector::ZZZZZZZZZZZZZZK1010();$ZZZZZZZR1717 = new ZZZZZZZS1818();$ZZZZZZZZZZZZZZZZZZZZZB11 = PlatformConnector::ZZZZZZZZZZZZZV2121();$ZZZZZZZZZZZZZZZZZZZZZZZZZR1717 = ZZZZZZZZZZZZZZZZZZZv21::getInstance();$ZZZZZZZZZZZZZZZZZZZZZZZZZR1717->ZZZZZZZZZZZZZZZZZZZy24(new ZZZZZZZZZZZZZZZZZc2('[]'));if(!isset($_REQUEST['parentaction'])){$_REQUEST['parentaction'] = "create";} if($_REQUEST['parentaction'] == "edit"){$ZZZZZZZZV2121 = new ZZZZZZZZW2222($ZZZZZZZR1717);$ZZZZZZZZZZZZZZZb1 = $ZZZZZZZZV2121->ZZZZZZZZZ2525($ZZZZZZZZZZZZZZZZZZZZZB11, $_REQUEST["record"]);if($ZZZZZZZZZZZZZZZb1<2){$ZZZZZZZR1717->ZZZZZZZZZa0();die();}}else{if(!$ZZZZZZZZZZZZZZZZZZZZZB11->ZZZZZZZV2121() && !ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZZt19(new ZZZZZy24())){$ZZZZZx23 = ZZZZZZZZZZZZZz25::load('common', 'common');PlatformConnector::ZZZZZZZZZZZZZZx23($ZZZZZx23['url']['list']);die();}} if(isset($_REQUEST['file']) && $_REQUEST['file'] == 'reportBuilder'){$ZZZZZZZZZZf5 = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZS1818($_REQUEST);if($ZZZZZZZZZZf5['statusCode']!=1){echo json_encode($ZZZZZZZZZZf5);die();} $ZZZZZZZZZZZA00 = new ZZZZZZZD33();$ZZZZZZZZZZZZZZZZZN1313 = $ZZZZZZZZZZZZZZZZZZZZZB11->ZZZZZZk10();$ZZZZZZZZZZZZZZZZZY2424 = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZT1919($_REQUEST, $ZZZZZZZZZZZZZZZZZN1313, $ZZZZZZZZZZZA00);if(isset($ZZZZZZZZZZZZZZZZZY2424['saveAction']) && $ZZZZZZZZZZZZZZZZZY2424['saveAction'] == 'update'){$r17 = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZZJ99($ZZZZZZZZZZZZZZZZZY2424);$P1515 = $ZZZZZZZZZZZA00->ZZZZZZZZH77($r17, $ZZZZZZZZZZZZZZZZZY2424['record']);$ZZZZZZZZZZf5['insertedReportId'] = $ZZZZZZZZZZZZZZZZZY2424['record'];$ZZZZZZZZZZf5['statusMessage'] = $mod_strings['label_failed_to_save'];if($P1515) {$ZZZZZZZZZZf5['statusMessage'] = $mod_strings['label_saved'];} echo json_encode($ZZZZZZZZZZf5);die();} $ZZZZZZZZZZf5['insertedReportId'] = $ZZZZZZZZZZZA00->ZZZZZZZZJ99($ZZZZZZZZZZZZZZZZZY2424);$ZZZZZZZZZZf5['statusMessage'] = $mod_strings['label_saved'];echo json_encode($ZZZZZZZZZZf5);die();} $this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['simpleBuilder'] = 0;if(isset($_REQUEST['parenttab']) && $_REQUEST['parenttab'] == 'simple'){$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['simpleBuilder'] = 1;} $ZZZZZZZZZZZZZZZZZZL1111 = ZZZZZZZZZZZZZz25::load('reportBuilder', 'common');$ZZZZZZZZZZZZZG66 = PlatformConnector::ZZZZZZZZZZZZZy24();asort($ZZZZZZZZZZZZZG66);$ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZD33 = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZZa0($ZZZZZZZZZZZZZG66);$ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZE44 = PlatformConnector::getUrl();$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['SERVERURL'] = $ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZE44;$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['MOD'] = $mod_strings;$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['APP'] = $app_strings;$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['modules'] = json_encode($ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZD33);$ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZF55 = PlatformConnector::ZZZZZZZZZZZZw22("many");$ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZG66 = PlatformConnector::ZZZZZZZZZZZZZZA00($ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZF55, "many");$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['manyToManyConfig'] = json_encode($ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZG66);$ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZH77 = ZZZZZZZZZZZZZz25::load('common', 'common');$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['commonConfig'] = $ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZH77;$ZZZZZZZZZZZT1919 = false;$ZZZZZZZZZZZZZZZZR1717 = false;$ZZZZZZZZZZZA00 = new ZZZZZZZD33();$ZZZZZZZZZZZz25 = new ZZZZZZW2222();if($_REQUEST['parentaction'] == "edit"){$ZZZZZZZy24 = $_REQUEST['record'];$ZZZZZZZy24 = (int)$ZZZZZZZy24;$report = $ZZZZZZZZZZZA00->ZZZZZZZZQ1616("id, category_id, module, related_data, title, description, options, iscombined", "id = {$ZZZZZZZy24}", 1);$ZZZZZZZZZZZZZZZZR1717['record'] = $ZZZZZZZy24;$ZZZZZZZZZZZZZZZZR1717['categoryId'] = $report[0]['category_id'];$ZZZZZZZZZZZZZZZZR1717['module'] = $report[0]['module'];if(empty($ZZZZZZZZZZZZZZZZR1717['module'])){$ZZZZZZZZZZZZZZZZZZl11 = json_decode($report[0]['related_data'], true);$ZZZZZZZZZZZZZZZZZZl11 = $ZZZZZZZZZZZZZZZZZZl11[0][4];$ZZZZZZZZZZZZZZZZR1717['module'] = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZZK1010($ZZZZZZZZZZZZZZZZZZl11);$report[0]['module'] = $ZZZZZZZZZZZZZZZZR1717['module'];} $ZZZZZZZZZZZZZZZZR1717['title'] = $report[0]['title'];$ZZZZZZZZZZZZZZZZR1717['description'] = $report[0]['description'];$ZZZZZZZZZZZZZZZZR1717['options'] = json_decode($report[0]['options'], true);$ZZZZZZZZZZZZZZZZR1717['iscombined'] = $report[0]['iscombined'] == 1?"combined":"standard";$ZZZZZZZZZZZT1919 = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZZD33($report);} $this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['predefinedChildren'] = json_encode($ZZZZZZZZZZZT1919);$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['reportOptions'] = json_encode($ZZZZZZZZZZZZZZZZR1717);if(isset($_REQUEST['parenttab']) && $_REQUEST['parenttab'] == "settings"){}else {$ZZZZZZZZZZZZZZZZZZe4 = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZZc2($ZZZZZZZZZZZZZG66, $db);$ZZZZZZZZZZZZZZZZZZe4 = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZZd3($ZZZZZZZZZZZZZZZZZZe4, $ZZZZZZZR1717);$ZZZZZZZw22 = $ZZZZZZZZZZZz25->ZZZZZZZs18('id, title', 'visible=1', 'title ASC');$ZZZZZZZw22 = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZZq16($ZZZZZZZw22);$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['modulesFields'] = json_encode($ZZZZZZZZZZZZZZZZZZe4);$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['categories'] = json_encode($ZZZZZZZw22);$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['reportTypes'] = json_encode($ZZZZZZZZZZZZZZZZZZL1111['reportTypes']);$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['relationTypes'] = json_encode($ZZZZZZZZZZZZZZZZZZL1111['relationTypes']);$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['internal'] = json_encode($ZZZZZZZZZZZZZZZZZZL1111['internal']);$ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZI88 = PlatformConnector::ZZZZZZZZZZZZw22("all");$ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZJ99 = PlatformConnector::ZZZZZZZZZZZZZZA00($ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZI88, "all", $ZZZZZZZZZZZZZG66);foreach ($ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZJ99 as $ZO1414 => $ZZZZZZZr17) {asort($ZZZZZZZr17);$ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZJ99[$ZO1414] = $ZZZZZZZr17;} $ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZJ99 = ZZZZZZZZZZZZZZZZZR1717::ZZZZZZZZZZZZZZZZZZv21($ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZJ99);$this->ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZC22['allRelationsParsed'] = json_encode($ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZJ99);}}}