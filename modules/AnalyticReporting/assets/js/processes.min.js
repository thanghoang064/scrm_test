/*! AnalyticReporting 19-07-2018 */
if(void 0===processesOptions)var processesOptions={};var processes=new Ractive({el:"#ar-processes",template:"#processesTemplate",data:{types:processesOptions.types,selectedJob:!1,internal:processesOptions.internal,loader:!1},parseResponse:function(a){try{a=JSON.parse(a)}catch(b){a={statusCode:2,statusMessage:"Error. Unexpected response from server. Server responded with message: "+a}}return a},oninit:function(){var a=this;this.observe(this.observers,{init:!1}),this.on("editJob",function(a,b){this.set("selectedJob",!1),this.set("selectedJob",this.get("types.jobs."+b))}),this.on("runJob",function(b,c){this.set("internal.response",{}),a.set("loader",!0);var d={};d.parenttab="runJob",d.jobId=c,jQuery.post(a.get("internal.postUrl"),d,function(b){a.set("loader",!1);var c=a.parseResponse(b);a.set("internal.response",c),1==c.statusCode&&(a.set("selectedJob",!1),a.set("types.jobs",c.jobs))})}),this.on("updateJob",function(b,c){a.set("loader",!0),this.set("types.jobs",this.get("types.jobs")),this.set("internal.response",{});var d={};d.parenttab="updateJob",d.job=this.get("selectedJob"),jQuery.post(a.get("internal.postUrl"),d,function(b){a.set("loader",!1);var c=a.parseResponse(b);a.set("internal.response",c)})}),this.on("deleteJob",function(b,c){if(a.set("loader",!0),confirm("Are you sure you want to delete this job permanently?")){this.set("types.jobs",this.get("types.jobs")),this.set("internal.response",{});var d={};d.parenttab="deleteJob",d.job=this.get("selectedJob"),jQuery.post(a.get("internal.postUrl"),d,function(b){a.set("loader",!1);var c=a.parseResponse(b);a.set("internal.response",c),1==c.statusCode&&(a.set("selectedJob",!1),a.set("types.jobs",c.jobs))})}}),this.on("addJob",function(a,b){var c={id:!1,name:"",description:"",active:1,type:"calculateAuditedFieldStateByTimePeriod",state:{},descriptor:{maxIterations:1e4,cachedElements:12}};this.set("selectedJob",c)}),this.on("createJob",function(b,c){a.set("loader",!0),this.set("internal.response",{});var d={};d.parenttab="createJob",d.job=this.get("selectedJob"),jQuery.post(a.get("internal.postUrl"),d,function(b){a.set("loader",!1);var c=a.parseResponse(b);a.set("internal.response",c),1==c.statusCode&&(a.set("selectedJob",!1),a.set("types.jobs",c.jobs))})}),this.on("clearJobCache",function(b,c){a.set("loader",!0),this.set("internal.response",{});var d={};d.parenttab="clearJobCache",d.job=this.get("selectedJob"),jQuery.post(a.get("internal.postUrl"),d,function(b){a.set("loader",!1);var c=a.parseResponse(b);a.set("internal.response",c),1==c.statusCode&&(a.set("selectedJob",!1),a.set("types.jobs",c.jobs))})})},observers:{"selectedJob.descriptor.module":function(a,b){if("calculateAuditedFieldStateByTimePeriod"==this.get("selectedJob.type")){var c=this.get("types.jobDescriptors.calculateAuditedFieldStateByTimePeriod.auditedModuleFields");if(this.set("types.availableFields",c[a]),void 0===b)return;void 0!==c[a]&&void 0!==c[a][0]&&this.set("selectedJob.descriptor.field",c[a][0].name)}}}});